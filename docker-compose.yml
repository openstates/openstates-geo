version: "3"

services:
  make-tiles:
    environment:
      DATABASE_URL: "postgis://openstates:openstates@db:5432/openstatesorg"
    build:
      context: .
      dockerfile: Dockerfile
      args:
        - MAPBOX_ACCOUNT
        - MAPBOX_ACCESS_TOKEN
  db:
    image: "mdillon/postgis:11-alpine"
    ports:
      - 5432:5432
    environment:
      POSTGRES_PASSWORD: openstates
      POSTGRES_USER: openstates
      POSTGRES_DB: openstatesorg
    volumes:
      - ./openstates-postgres/:/var/lib/postgresql/data
